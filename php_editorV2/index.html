<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- jQUERY -->
    <!-- <script type="text/javascript" src="editor/jQuery-3.3.1/jquery-3.3.1.min.js"></script> -->
    
    <!-- Editor -->
    <!-- <link rel="stylesheet" href="editor/Editor-1.9.6/css/editor.dataTables.min.css"> -->
    <!-- <script type="text/javascript" src="editor/Editor-1.9.6/js/dataTables.editor.min.js"></script> -->
    
    <!-- DataTables -->
    <script type="text/javascript" src="editor/datatables.min.js"></script>
    <link rel="stylesheet" type="text/css" href="editor/datatables.min.css"/>

    <!-- Button -->
    <!-- <link rel="stylesheet" href="editor/Buttons-1.6.5/css/buttons.bootstrap.min.css"> -->
    <!-- <script type="text/javascript" src="editor/Buttons-1.6.5/js/buttons.bootstrap.min.js"></script> -->

    <link rel="stylesheet" type="text/css" href="editor/DataTables-1.10.23/css/dataTables.bootstrap4.css"/>
    <link rel="stylesheet" type="text/css" href="editor/Editor-1.9.6/css/editor.bootstrap4.css"/>
    <link rel="stylesheet" type="text/css" href="editor/AutoFill-2.3.5/css/autoFill.bootstrap4.min.css"/>
    <link rel="stylesheet" type="text/css" href="editor/Buttons-1.6.5/css/buttons.bootstrap4.css"/>
    <link rel="stylesheet" type="text/css" href="editor/ColReorder-1.5.3/css/colReorder.bootstrap4.css"/>
    <link rel="stylesheet" type="text/css" href="editor/FixedColumns-3.3.2/css/fixedColumns.bootstrap4.css"/>
    <link rel="stylesheet" type="text/css" href="editor/FixedHeader-3.1.7/css/fixedHeader.bootstrap4.css"/>
    <link rel="stylesheet" type="text/css" href="editor/KeyTable-2.5.3/css/keyTable.bootstrap4.css"/>
    <link rel="stylesheet" type="text/css" href="editor/Responsive-2.2.7/css/responsive.bootstrap4.css"/>
    <link rel="stylesheet" type="text/css" href="editor/RowGroup-1.1.2/css/rowGroup.bootstrap4.css"/>
    <link rel="stylesheet" type="text/css" href="editor/RowReorder-1.2.7/css/rowReorder.bootstrap4.css"/>
    <link rel="stylesheet" type="text/css" href="editor/Scroller-2.0.3/css/scroller.bootstrap4.css"/>
    <link rel="stylesheet" type="text/css" href="editor/SearchBuilder-1.0.1/css/searchBuilder.bootstrap4.css"/>
    <link rel="stylesheet" type="text/css" href="editor/SearchPanes-1.2.2/css/searchPanes.bootstrap4.css"/>
    <link rel="stylesheet" type="text/css" href="editor/Select-1.3.1/css/select.bootstrap4.css"/>
    
    <script type="text/javascript" src="editor/jQuery-3.3.1/jquery-3.3.1.js"></script>
    <script type="text/javascript" src="editor/JSZip-2.5.0/jszip.js"></script>
    <script type="text/javascript" src="editor/pdfmake-0.1.36/pdfmake.js"></script>
    <script type="text/javascript" src="editor/pdfmake-0.1.36/vfs_fonts.js"></script>
    <script type="text/javascript" src="editor/DataTables-1.10.23/js/jquery.dataTables.js"></script>
    <script type="text/javascript" src="editor/DataTables-1.10.23/js/dataTables.bootstrap4.js"></script>
    <script type="text/javascript" src="editor/Editor-1.9.6/js/dataTables.editor.js"></script>
    <script type="text/javascript" src="editor/Editor-1.9.6/js/editor.bootstrap4.js"></script>
    <script type="text/javascript" src="editor/AutoFill-2.3.5/js/dataTables.autoFill.js"></script>
    <script type="text/javascript" src="editor/AutoFill-2.3.5/js/autoFill.bootstrap4.js"></script>
    <script type="text/javascript" src="editor/Buttons-1.6.5/js/dataTables.buttons.js"></script>
    <script type="text/javascript" src="editor/Buttons-1.6.5/js/buttons.bootstrap4.js"></script>
    <script type="text/javascript" src="editor/Buttons-1.6.5/js/buttons.colVis.js"></script>
    <script type="text/javascript" src="editor/Buttons-1.6.5/js/buttons.html5.js"></script>
    <script type="text/javascript" src="editor/Buttons-1.6.5/js/buttons.print.js"></script>
    <script type="text/javascript" src="editor/ColReorder-1.5.3/js/dataTables.colReorder.js"></script>
    <script type="text/javascript" src="editor/FixedColumns-3.3.2/js/dataTables.fixedColumns.js"></script>
    <script type="text/javascript" src="editor/FixedHeader-3.1.7/js/dataTables.fixedHeader.js"></script>
    <script type="text/javascript" src="editor/KeyTable-2.5.3/js/dataTables.keyTable.js"></script>
    <script type="text/javascript" src="editor/Responsive-2.2.7/js/dataTables.responsive.js"></script>
    <script type="text/javascript" src="editor/RowGroup-1.1.2/js/dataTables.rowGroup.js"></script>
    <script type="text/javascript" src="editor/RowReorder-1.2.7/js/dataTables.rowReorder.js"></script>
    <script type="text/javascript" src="editor/Scroller-2.0.3/js/dataTables.scroller.js"></script>
    <script type="text/javascript" src="editor/SearchBuilder-1.0.1/js/dataTables.searchBuilder.js"></script>
    <script type="text/javascript" src="editor/SearchBuilder-1.0.1/js/searchBuilder.bootstrap4.js"></script>
    <script type="text/javascript" src="editor/SearchPanes-1.2.2/js/dataTables.searchPanes.js"></script>
    <script type="text/javascript" src="editor/SearchPanes-1.2.2/js/searchPanes.bootstrap4.js"></script>
    <script type="text/javascript" src="editor/Select-1.3.1/js/dataTables.select.js"></script>



	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    
    
    <title>EDITOR v2</title>

    <script type="text/javascript" >
	
        var editor; // use a global for the submit and return data rendering in the examples

        $(document).ready(function() {
            editor = new $.fn.dataTable.Editor( {
                ajax: "api/fetch.php",
                table: "#users_table",
                fields: [ 
                    {
                        label: "Username:",
                        name: "users.username"
                    }, {
                        label: "Nome:",
                        name: "users.name"
                    }, {
                        label: "Email:",
                        name: "users.email"
                    }, {
                        label: "Città:",
                        name: "users.city",
                        type: "select"
                    }
                ]
            } );

            // Activate an inline edit on click of a table cell
            $('#users_table').on( 'click', 'tbody td:not(:first-child)', function (e) {
                editor.inline( this, {
                    onBlur: 'submit'
                });
            } );

            $('#users_table').DataTable( {
                // Opzione DOM (https://datatables.net/reference/option/dom)
                dom: "Bfrtip", // B=button + dom option (filtering input,processing,table,info,pagination)
                ajax: {
                    url: "api/fetch.php",
                    type: 'POST'
                },
                columns: [
                    // CHECK BOX (per selezionare il campo)
                    {
                        data: null,
                        defaultContent: '',
                        className: 'select-checkbox',
                        orderable: false
                    },
                    { data: "users.id" },
                    { data: "users.username"},
                    { data: "users.name"},
                    { data: "users.email" },
                    { data: "cities.name", editField: "users.city"}
                    
                ],
                select: true, // permette di selezionare le righe della tabella
                // Aggiunge i bottoni alla tabella (https://datatables.net/extensions/buttons/)
                buttons: [
                    { extend: "create", editor: editor , text: "Nuovo"},
                    { extend: "edit",   editor: editor , text: "Modifica"},
                    { extend: "remove", editor: editor , text: "Elimina"}
                ]
            } );
        } );
	</script>
</head>
<body>
    <h1>Tabella Users (PHP_testdb) - Editor v2</h1>
    <div class="table-responsive">
        <table id="users_table" class="table table-striped table-bordered">
            <thead class="thead-dark">
                <tr>
                    <th></th> <!-- checkbox -->
                    <th scope="col">ID</th>
                    <th scope="col">Username</th>
                    <th scope="col">Nome</th>
                    <th scope="col">Email</th>
                    <th scope="col">Città</th>
                </tr>
            </thead>
        </table>
    </div>
</body>
</html>

